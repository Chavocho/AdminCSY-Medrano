<!DOCTYPE html>
<head>
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="http://maps.google.com/maps?file=api&v=3&key=AIzaSyBAsxp5MZW-eJlJryQnekIxNZHAYU0BhU4"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
	
	// Instancia del geocodificador
	var geocoder = new google.maps.Geocoder();
	
	var map; 
	var ruta="@onta_el_cliete@";

	<!-- Esta funcion nos añadira las marcas de forma dinamica en el mapa
	function addMark(location){
		marker = new google.maps.Marker({
			position: location,
			map: map
			//icon: "icons/super-mono-3d-01.png"
		});
	}
	
	function convertAddress(direccion)
	{
			
			// Propiedades de la georreferenciación
			var request = {
				address: direccion
			}
				
			// Invocación a la georreferenciación (proceso asíncrono) 
			geocoder.geocode(request, function(results, status) {
				
				//si el estado de la llamado es OK
				if (status == google.maps.GeocoderStatus.OK) {
					alert("servicio disponible");
					map.setCenter(results[0].geometry.location);

					// Creamos la marca dinamica con nuestra funcion
					addMark(results[0].geometry.location);
				}
				else
				{
					alert("servicio no disponible");
				}
			});
	}
	
	function initialize() {
		
		// Propiedades iniciales del mapa
		var myOptions = {
			zoom: 15, 
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
		
        // Instancia del mapa
        map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);
		convertAddress(ruta);
		
	}
 
</script>
</head>
<body onload="initialize()">
  <div id="map_canvas" style="width: 595px; height: 266px;"></div>
  <div id="directions_panel" style="width: 35%; height: 100%; overflow: auto; float: right;"></div>
</body>
</html>